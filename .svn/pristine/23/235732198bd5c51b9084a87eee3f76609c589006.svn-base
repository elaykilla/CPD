#{extends 'Dendrites/template.html' /}
#{set title:'Edit Event' /}
<div class="container-fluid span10">
    <form class="well form-inline" method="POST" action="@{Events.postEvent}">
        <fieldset>
            <legend>Création d'évènement</legend>
            <input type="hidden" value="${dendrite?.id}" name="dendriteId"/> 
            #{field 'event.id'}
            <input id="${field.id}" type="hidden" name="${field.name}"
                   value="${event?.id}"  /> 
            #{/field}
            #{field 'event.title'}
            <div
                class="control-group  ${errors.forKey(field?.name) ? 'error' : ''}">
                <label for="${field.id}">&{'Titre : '}</label>
                #{if field.error}
                <span class="help-inline">${field.error}</span>
                #{/if}
                <input id="${field.id}" class="span12" type="text" name="${field.name}"
                       value="${event?.title}" placeholder="&{'Titre'}" required /> 
            </div>
            #{/field}

            #{field 'event.content'}
            <div
                class="control-group ${errors.forKey(field?.name) ? 'error' : ''}">
                <label for="${field.id}">&{'Content: '}</label>
                #{if field.error}
                <span class="help-inline">${field.error}</span>
                #{/if}
                <textarea id='edit' rows="10" class="span12" id="${field.id}" 
                          type="text" name="${field.name}" 
                          placeholder="&{'Contenu'}" required>${event?.content ? event?.content : 'Contenu'}</textarea>
            </div>
            #{/field}
            #{field 'beginning'}
            <div
                class="control-group ${errors.forKey(field?.name) ? 'error' : ''}">
                <label for="${field.id}">&{'Date de l\'evenement : '}</label>
                #{if field.error}
                <span class="help-inline">${field.error}</span>
                #{/if}
                <div class="datetimepicker input-append">
                    <!--<input data-format="yyyy-MM-dd" type="text">-->
                    <input id="${field.id}" type="text" name="${field.name}"
                           placeholder="Date de l'évènement" required value="${event?.beginning?.format('yyyy-MM-dd HH:mm:ss')}"/>
                    <span class="add-on">
                        <i data-time-icon="icon-time" data-date-icon="icon-calendar">
                        </i>
                    </span>
                </div>
            </div>
            #{/field}
            #{field 'event.cost'}
            <div
                class="control-group ${errors.forKey(field?.name) ? 'error' : ''}">
                <label for="${field.id}">&{'Coût de l\'evenement : '}</label>
                #{if field.error}
                <span class="help-inline">${field.error}</span>
                #{/if}
                <input rows="10" id="${field.id}" 
                       name="${field.name}" 
                       value="${event?.cost}" 
                       placeholder="&{'Montant en euros'}" required />
            </div>
            #{/field}
            <div class="well">
                <fieldset>
                    <legend>L'addresse de l'évènement</legend>
                    <input type="hidden" name="adresse.id" value="${event?.adresse?.id}"/>
                    #{field 'adresse.adress'}
                    <div
                        class="control-group  ${errors.forKey(field?.name) ? 'error' : ''}">
                        <label for="${field.id}">&{'Adresse: '}</label>
                        #{if field.error}
                        <span class="help-inline">${field.error}</span>
                        #{/if}
                        <input id="${field.id}" type="text" name="${field.name}"
                               value="${event?.adresse?.adress}" placeholder="&{'Adresse'}" required /> 
                    </div>
                    #{/field} 
                    #{field 'adresse.zipCode'}
                    <div
                        class="control-group  ${errors.forKey(field?.name) ? 'error' : ''}">
                        <label for="${field.id}">&{'Code postal: '}</label>
                        #{if field.error}
                        <span class="help-inline">${field.error}</span>
                        #{/if}
                        <input id="${field.id}" type="text" name="${field.name}"
                               value="${event?.adresse?.zipCode}" placeholder="&{'Code postal'}" required /> 
                    </div>
                    #{/field}
                    #{field 'adresse.ville'}
                    <div
                        class="control-group  ${errors.forKey(field?.name) ? 'error' : ''}">
                        <label class="control-label" for="${field.id}">&{'Ville: '}</label>
                        #{if field.error}
                        <span class="help-inline">${field.error}</span>
                        #{/if}
                        <input id="${field.id}" type="text" name="${field.name}"
                               value="${event?.adresse?.ville}" placeholder="&{'Ville'}" required /> 
                    </div>
                    #{/field} 
                    #{field 'adresse.pays'}
                    <div
                        class="control-group  ${errors.forKey(field?.name) ? 'error' : ''}">
                        <label for="${field.id}">&{'Pays: '}</label>
                        #{if field.error}
                        <span class="help-inline">${field.error}</span>
                        #{/if}
                        <input id="${field.id}" type="text" name="${field.name}"
                               value="${event?.adresse?.pays}" placeholder="&{'Pays'}" required />
                    </div>
                    #{/field}
                    #{field 'adresse.phone'}
                    <div
                        class="control-group  ${errors.forKey(field?.name) ? 'error' : ''}">
                        <label for="${field.id}">&{'Phone: '}</label>
                        #{if field.error}
                        <span class="help-inline">${field.error}</span>
                        #{/if}
                        <input id="${field.id}" type="text" name="${field.name}"
                               value="${event?.adresse?.phone}" placeholder="&{'0612345789'}" /> 
                    </div>
                    #{/field}
                </fieldset>
            </div>
            <!--            <legend>L'affiche de l'évènement</legend>
                        #{field 'file'}
                        <div class="control-group ${errors.forKey(field?.name) ? 'error' : ''}">
                            <label for="${field.id}">&{'Affiche de l\'évènement : '}</label>
                            #{if field.error}
                            <span class="help-inline">${field.error}</span>
                            #{/if}
                            <input  class="input-xlarge" type="file" name="Affiche" placeholder="&{'Importer une image'}" />
                            <p>La taille limite est 3 Mo</p>
                        </div>
                        #{/field}-->
            <div class="form-actions">
                <input type="submit" value="&{'Valider'}" class="btn btn-u" />
                <a  href="@{Events.events()}" class="btn">&{'Annuler'}</a>
            </div>
        </fieldset>
    </form>
</div>